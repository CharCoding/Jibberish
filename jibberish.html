<!DOCTYPE html>
<html>
<head>
	<title>Jibberish</title>
	<meta charset="utf-8" />
	<script type="text/javascript">
	const init = "(($,_,$$=+_,__)=>($.$=!''+_,$._=!_+_,$.$$=_[_]+_,$.$_=$+_,$._$=-~_/_+_,$.__=$.$_[-~-~-~-~-~_]+$.$_[++$$]+$.$$[$$++]+$._[++$$]+$.$[+_]+$.$[-~_]+$.$$[+_]+$.$_[-~++$$]+$.$[+_]+$.$_[-~_]+$.$[-~_],$.$$_=(+_)[$.__]+_,$.$_$=''[$.__]+_,$.$__=/./[$.__]+_,__=(_=>_)[$.__],$._$_=$.$[-~_]+$._[$$++]+$.$[+_]+$.$[-~-~_]+$.$[-~_]+$.$$[-~_],$.__$=__($._$_+' '+$.__[+_]+$.$[-~_]+$._$[-~++$$]+$.$__[++$$+$$]+$.$[+_]+$.$_[-~_])()+_,$['']=__('_',$._$_+' _.'+$.$[+_]+$.$_[-~_]+$.$_$[$._[-~-~-~_]+$._[-~-~_]+$._$[-~-~-~_]+$.__[+_]+$._$_[-~_]](-~-~$$,-~$$+$$)+'('+--$$*$$+')'),$.___=(...$_)=>''[$.__][$._[+_]+$.$[-~_]+$.$_[-~_]+$.$$_[~-$$+$$++]+$.__$[++$$]+$['']($$-~$$)+$._[-~_]+$.$[-~_]+$.__$[$$]+$.$_[-~_]+$.$$[-~-~_]+$._$_[-~_]][$[''](~(_=>-_-++_+''+_+_+_*_*~-(_*--_))($$))](_,$_),$.___(",
	end = ")))({},[]);",
	table = [
		"+''",
		"+!''",
		"-~!''",
		"-~-~!''",
		"-~-~-~!''",
		"-~-~-~-~!''",
		"-~-~!''<<!''",
		"~(~''<<-~-~!'')",
		"!''<<-~-~!''",
		"~(~''+''+-'')",
		"-(~''+''+-'')",
		"-(~''+''+-~'')",
		"-~-~!''<<-~!''",
		"-~-~!''<<-~!''|!''",
		"~-~(~''<<-~-~-~!'')",
		"~(~''<<-~-~-~!'')",
		"!''<<-~-~-~!''",
		"!''<<-~-~-~!''|!''",
		"~-~(~!''+''+-'')",
		"~(~!''+''+-'')",
		"-(~!''+''+-'')",
		"-(~!''+''+-~'')",
		"-(~!''+''+-~!'')",
		"~(~-~!''<<-~-~!'')",
		"-~-~!''<<-~-~!''",
		"[~-~-~-~!'']**-~!''",
		"~(_=>_**-_)(~-~!'')",
		"[-~-~!'']**-~-~!''",
		"~-~(~-~!''+''+-'')",
		"~(~-~!''+''+-'')",
		"-(~-~!''+''+-'')",
		"-(~-~!''+''+-~'')",
		"!''<<-~-~-~-~!''",
	], encode = str => {
		let n = [];
		for(let i = str.length; i--;){
			let c = str.charCodeAt(i);
			if(table[c]) n.unshift(table[c]);
			else if(c < 64) n.unshift('(' + table[32] + ')+(' + table[c & 31] + ')');
			else if(c < 1056) n.unshift('(' + table[c >>> 5] + ")<<-~-~-~-~!''|" + table[c & 31]);
			else if(c < 33792) n.unshift('(' + table[c >>> 10] + ")<<-(~''+''+-'')|(" + table[c >>> 5 & 31] + ")<<-~-~-~-~!''|" + table[c & 31]);
			// Uhh partial unicode support?
		}
		// if(evalScript.checked) return initEval + n.join() + endEval; // TODO: eval script
		return init + n.join() + end;
	};
	</script>
</head>
<body>
	<p>Jibberish - convert text <del>or script</del> into JavaScript gibberish. &nbsp; &nbsp;
		Copyright &copy;<a href="http://github.com/CharCoding">CharCoding</a>, 2017</p>
	<textarea id="original" rows="15" cols="60" placeholder="input text/script"></textarea>
	<textarea id="jibberish" rows="15" cols="60" placeholder="jibberish script"></textarea><br />
	<input type="checkbox" id="evalScript" disabled="true" /><label for="evalScript"><del>Eval() input</del></label> &nbsp; &nbsp;
	Length of Jibberish: <input type="number" id="scriptLength" readonly="true" step="1" min="0" /> bytes. &nbsp; &nbsp;
	<input type="button" value="eval() jibberish as text" id="runScript" />
	<script type="text/javascript">
	let timer = 0, converted = false;
	original.addEventListener('keyup',function(e){
		converted = false;
		clearTimeout(timer);
		timer = setTimeout(function(){
			jibberish.value = encode(original.value);
			scriptLength.value = jibberish.value.length;
			converted = true;
		}, 1500);
	});
	evalScript.addEventListener('change',function(e){
		return alert("Feature not implemented yet!");
		if(this.checked) runScript.value = 'eval() jibberish as script';
		else runScript.value = 'eval() jibberish as text';
	})
	runScript.addEventListener('click',function(e){
		if(!converted) {
			jibberish.value = encode(original.value);
			converted = true;
		}
		try { alert(eval(jibberish.value)); }
		catch(e) { alert("Something went wrong! " + e); }
	});
	</script>
</body>
